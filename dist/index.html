<!DOCTYPE html>
<html lang="ja"> <!-- Ë®ÄË™ûÂ±ûÊÄß„ÇíËøΩÂä† -->
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Áµ±ÂêàÂú∞ÈúáÊÉÖÂ†±</title>
    <link rel="icon" href="/favicon.ico" sizes="256x256" />

    <!-- 1. ‰æùÂ≠ò„É©„Ç§„Éñ„É©„É™ (CSS) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css" /> <!-- style.css „ÅåÂêå„Åò„Éï„Ç©„É´„ÉÄ„Å´„ÅÇ„ÇãÂâçÊèê -->

</head>
<body>
    <div class="fancy-tab-container">
        <div class="tab-navigation">
            <!-- „Çø„Éñ„Éú„Çø„É≥ -->
            <button class="tab-btn active" data-tab="tab1">
                <span class="tab-icon">üåç</span>
                <span class="tab-text">Áµ±ÂêàÂú∞ÈúáÊÉÖÂ†±</span>
            </button>
            <button class="tab-btn" data-tab="tab1_1">
                <span class="tab-icon">üåä</span>
                <span class="tab-text">Ê¥•Ê≥¢ÊÉÖÂ†±</span>
            </button>
            <button class="tab-btn" data-tab="tab2">
                <span class="tab-icon">üó∫</span>
                <span class="tab-text">Âú∞Âõ≥</span>
            </button>
            <!-- tab2.1 „Å® tab2.2 „Éú„Çø„É≥„ÅØ tab2 „ÅÆÂ≠ê„Å®„Åó„Å¶ÈÖçÁΩÆ„Åï„Çå„Å¶„ÅÑ„Åü„Åå„ÄÅ
                 ‰ªñ„ÅÆ„Çø„Éñ„Å®ÂêåÂàó„Å´ÈÖçÁΩÆ„Åô„Çã„Åü„ÇÅ„ÄÅË¶™„Çø„ÉñÂÜÖ„Å´„ÅØÂÖ•„Çå„Å™„ÅÑ -->
            <button class="tab-btn" data-tab="tab2.1">
                <span class="tab-icon">üìä</span>
                <span class="tab-text">3D„Éó„É≠„ÉÉ„Éà</span>
            </button>
            <button class="tab-btn" data-tab="tab2.2">
                <span class="tab-icon">üåé</span>
                <span class="tab-text">ÁêÉÈù¢„Éó„É≠„ÉÉ„Éà</span>
            </button>
            <button class="tab-btn" data-tab="tab3">
                <span class="tab-icon">‚öôÔ∏è</span>
                <span class="tab-text">Ë®≠ÂÆö</span>
            </button>
            <div class="tab-indicator"></div> <!-- „Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº -->
        </div>

        <!-- „Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <div class="tab-content-container">
            <!-- tab1: Áµ±ÂêàÂú∞ÈúáÊÉÖÂ†±„É™„Çπ„Éà -->
            <div id="tab1" class="tab-content active">
                <div class="content-card">
                    <div class="header-controls">
                        <div class="sort-controls">
                            <label for="sortCriteria">‰∏¶„Å≥Êõø„Åà:</label>
                            <select id="sortCriteria">
                                <option value="time">Áô∫ÁîüÊôÇÂàª</option>
                                <option value="magnitude">„Éû„Ç∞„Éã„ÉÅ„É•„Éº„Éâ</option>
                                <option value="intensity">ÊúÄÂ§ßÈúáÂ∫¶</option>
                                <option value="depth">Ê∑±„Åï</option>
                            </select>
                            <button id="sortDirectionBtn">‚ñ≤</button> <!-- ÊòáÈ†Ü/ÈôçÈ†Ü„Éà„Ç∞„É´ -->
                        </div>
                        <div class="status-info">
                            <span id="combinedStatus">ÊúÄÊñ∞Êõ¥Êñ∞: </span>
                            <span id="count">0</span> ‰ª∂
                        </div>
                    </div>
                    <div id="combinedEqList" class="earthquake-list">
                        <!-- Âú∞Èúá„É™„Çπ„Éà„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ÊåøÂÖ•„Åï„Çå„Åæ„Åô -->
                        <p class="no-data">„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Çì„Åß„ÅÑ„Åæ„Åô...</p>
                    </div>
                </div>
            </div>

            <!-- tab1_1: Ê¥•Ê≥¢ÊÉÖÂ†± -->
            <div id="tab1_1" class="tab-content">
                <div class="content-card">
                    <div class="header-controls">
                        <button id="refreshTsunamiBtn">Êõ¥Êñ∞</button>
                        <div class="auto-refresh">
                            <label for="autoRefreshTsunami">Ëá™ÂãïÊõ¥Êñ∞:</label>
                            <input type="checkbox" id="autoRefreshTsunami">
                        </div>
                    </div>
                    <div id="tsunamiData" class="tsunami-list">
                        <!-- Ê¥•Ê≥¢ÊÉÖÂ†±„Åå„Åì„Åì„Å´ÂãïÁöÑ„Å´ÊåøÂÖ•„Åï„Çå„Åæ„Åô -->
                        <p class="no-data">Ê¥•Ê≥¢ÊÉÖÂ†±„ÇíË™≠„ÅøËæº„Çì„Åß„ÅÑ„Åæ„Åô...</p>
                    </div>
                </div>
            </div>

            <!-- tab2: Âú∞Âõ≥ -->
            <div id="tab2" class="tab-content">
                <div id="map" class="map-container"></div>
                <!-- Âú∞Âõ≥‰∏ä„ÅÆÊ¥•Ê≥¢„É¨„Ç§„É§„Éº„ÅØ JavaScript „ÅßÂà∂Âæ° -->
            </div>

            <!-- tab2.1: 3D„Éó„É≠„ÉÉ„Éà -->
            <div id="tab2.1" class="tab-content">
                <div id="plotly-graph-2-1" class="plotly-graph-container"></div>
            </div>

            <!-- tab2.2: ÁêÉÈù¢„Éó„É≠„ÉÉ„Éà -->
            <div id="tab2.2" class="tab-content">
                 <div id="plotly-graph-2-2" class="plotly-graph-container"></div>
            </div>

            <!-- tab3: Ë®≠ÂÆö -->
            <div id="tab3" class="tab-content">
                <div class="content-card">
                    <h3>ÊÉÖÂ†±Ë°®Á§∫Ë®≠ÂÆö</h3>

                    <!-- „Éá„Éº„Çø„ÇΩ„Éº„Çπ„Éï„Ç£„É´„Çø„Éº -->
                    <div class="settings-section">
                        <h4>EEW (Á∑äÊÄ•Âú∞ÈúáÈÄüÂ†±)</h4>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceJMA">Ê∞óË±°Â∫Å-EEW</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceJMA" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceSC">ÂõõÂ∑ù-EEW</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceSC" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceFJ">Á¶èÂª∫-EEW</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceFJ" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceCEA">‰∏≠ÂõΩÂú∞ÈúáÂ±Ä-EEW</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceCEA" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceICL">ICL-EEW</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceICL" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceSA">ShakeAlert</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceSA" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h4>Âú∞Èúá„Éá„Éº„Çø</h4>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceJmaEqList">Ê∞óË±°Â∫Å„É™„Çπ„Éà</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceJmaEqList" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceCENC">‰∏≠ÂõΩÂú∞ÈúáÂè∞Á∂≤</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceCENC" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceEMSC">EMSC</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceEMSC" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceCWA">‰∏≠Â§ÆÊ∞óË±°ÁΩ≤ (Âè∞Êπæ)</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceCWA" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceCWA_tiny">‰∏≠Â§ÆÊ∞óË±°ÁΩ≤ Â∞èÂå∫Âüü (Âè∞Êπæ)</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceCWA_tiny" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceUSGS">USGS</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceUSGS" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceBMKG">BMKG („Ç§„É≥„Éâ„Éç„Ç∑„Ç¢)</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceBMKG" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceBMKG_M5">BMKG M5+ („Ç§„É≥„Éâ„Éç„Ç∑„Ç¢)</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceBMKG_M5" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceJmaHypo">Ê∞óË±°Â∫Å„Éè„Ç§„Éù„É™„Çπ„Éà</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceJmaHypo" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="sourceJmaXml">Ê∞óË±°Â∫ÅXML</label>
                            <label class="switch">
                                <input type="checkbox" id="sourceJmaXml" /> <!-- unchecked „Å´‰øÆÊ≠£ -->
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h4>ÈÄöÁü•Ë®≠ÂÆö</h4>
                        <div class="toggle-container">
                            <label class="toggle-label" for="enableNotification">ÈÄöÁü•„ÇíÊúâÂäπ„Å´„Åô„Çã</label>
                            <label class="switch">
                                <input type="checkbox" id="enableNotification" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="soundNotification">Èü≥Â£∞ÈÄöÁü•</label>
                            <label class="switch">
                                <input type="checkbox" id="soundNotification" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <label for="magThreshold">ÈÄöÁü•„Éû„Ç∞„Éã„ÉÅ„É•„Éº„ÉâÈñæÂÄ§:</label>
                            <input type="number" id="magThreshold" min="0" step="0.1" value="1.0">
                        </div>
                    </div>

                    <div class="settings-section">
                        <h4>Âú∞Âõ≥„Éû„Éº„Ç´„ÉºË°®Á§∫</h4>
                        <div class="toggle-container">
                            <label class="toggle-label" for="showCwaTinyMarkers">CWA Â∞èÂå∫Âüü</label>
                            <label class="switch">
                                <input type="checkbox" id="showCwaTinyMarkers" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="showCwaMarkers">CWA</label>
                            <label class="switch">
                                <input type="checkbox" id="showCwaMarkers" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="showUsgsMarkers">USGS</label>
                            <label class="switch">
                                <input type="checkbox" id="showUsgsMarkers" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="showBmkgMarkers">BMKG</label>
                            <label class="switch">
                                <input type="checkbox" id="showBmkgMarkers" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="showBmkgM5Markers">BMKG M5+</label>
                            <label class="switch">
                                <input type="checkbox" id="showBmkgM5Markers" checked />
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="showJmaMarkers">Ê∞óË±°Â∫Å</label>
                            <label class="switch">
                                <input type="checkbox" id="showJmaMarkers" /> <!-- „Éá„Éï„Ç©„É´„ÉàÈùûË°®Á§∫ -->
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="showCencMarkers">CENC</label>
                            <label class="switch">
                                <input type="checkbox" id="showCencMarkers" /> <!-- „Éá„Éï„Ç©„É´„ÉàÈùûË°®Á§∫ -->
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <label class="toggle-label" for="showEmscMarkers">EMSC</label>
                            <label class="switch">
                                <input type="checkbox" id="showEmscMarkers" /> <!-- „Éá„Éï„Ç©„É´„ÉàÈùûË°®Á§∫ -->
                                <span class="slider"></span>
                            </label>
                        </div>
                        <button id="applyMapSettings">ÈÅ©Áî®</button>
                    </div>

                    <div class="settings-section">
                        <h4>Ëá™ÂãïÂèñÂæóË®≠ÂÆö</h4>
                        <div class="setting-item">
                            <label for="intervalInput">ÂèñÂæóÈñìÈöî (Áßí):</label>
                            <input type="number" id="intervalInput" min="10" value="300">
                        </div>
                        <button id="startButton">ÈñãÂßã</button>
                        <button id="stopButton">ÂÅúÊ≠¢</button>
                    </div>

                    <div class="settings-section">
                        <h4>JMA XML Ë©≥Á¥∞</h4>
                        <select id="jmaXmlDropdown">
                            <option value="">Âú∞ÈúáÊÉÖÂ†±„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                            <!-- „Ç™„Éó„Ç∑„Éß„É≥„ÅØ JavaScript „ÅßÂãïÁöÑ„Å´ËøΩÂä† -->
                        </select>
                        <div id="jmaXmlDetail" class="jma-xml-detail">
                            <p>XMLË©≥Á¥∞ÊÉÖÂ†±„ÇíË°®Á§∫„Åó„Åæ„Åô„ÄÇ</p>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h4>„ÉÜ„Éº„Éû</h4>
                        <button id="themeToggle">„ÉÄ„Éº„ÇØ„É¢„Éº„Éâ</button>
                    </div>

                    <div class="settings-section">
                        <h4>Ë°®Á§∫ÂàáÊõø</h4>
                        <button class="selectAll">„Åô„Åπ„Å¶Ë°®Á§∫</button>
                        <button class="deselectAll">„Åô„Åπ„Å¶ÈùûË°®Á§∫</button>
                    </div>

                    <div class="settings-section">
                        <h4>ÈúáÂ∫¶Ë°®Á§∫‰æã</h4>
                        <p>
                            „É°„É´„Ç´„É™ÈúáÂ∫¶ÈöéÁ¥ö
                            <span class="intensity-label level-1">1</span>
                            <span class="intensity-label level-2">2</span>
                            <span class="intensity-label level-3">3</span>
                            <span class="intensity-label level-4">4</span>
                            <span class="intensity-label level-5">5</span>
                            <span class="intensity-label level-6">6</span>
                            <span class="intensity-label level-7">7</span>
                            <span class="intensity-label level-8">8</span>
                            <span class="intensity-label level-9">9</span>
                            <span class="intensity-label level-10">10</span>
                            <span class="intensity-label weak">Âº±</span>
                            <span class="intensity-label strong">Âº∑</span>
                        </p>
                        <p>
                            Ê∞óË±°Â∫ÅÈúáÂ∫¶ÈöéÁ¥ö
                            <span class="intensity-label_j level-1">1</span>
                            <span class="intensity-label_j level-2">2</span>
                            <span class="intensity-label_j level-3">3</span>
                            <span class="intensity-label_j level-4">4</span>
                            <span class="intensity-label_j level-5">5</span>
                            <span class="intensity-label_j level-6">6</span>
                            <span class="intensity-label_j weak">Âº±</span>
                            <span class="intensity-label_j strong">Âº∑</span>
                        </p>
                    </div>

                </div>
            </div>
        </div> <!-- .tab-content-container -->
    </div> <!-- .fancy-tab-container -->

    <!-- 2. ‰æùÂ≠ò„É©„Ç§„Éñ„É©„É™ (JavaScript) -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.30.1.min.js" charset="utf-8"></script> <!-- „Éê„Éº„Ç∏„Éß„É≥„ÇíÁµ±‰∏Ä -->

    <!-- 3. Áã¨Ëá™„É¢„Ç∏„É•„Éº„É´ (JavaScript) - Ë™≠„ÅøËæº„ÅøÈ†ÜÂ∫è„ÅåÈáçË¶Å -->
    <script src="stateManager.js"></script>
    <script src="dataProcessor.js"></script>
    <script src="uiRenderer.js"></script>
    <script src="eventHandlers.js"></script>
    <script src="main.js"></script> <!-- main.js „ÅØÊúÄÂæå„Å´Ë™≠„ÅøËæº„ÇÄ -->

    <!-- 4. Êó¢Â≠ò„ÅÆ„Ç∞„É≠„Éº„Éê„É´„Å™WebSocket/„Éá„Éº„ÇøÂèñÂæóÈñ¢Êï∞„ÇíÂê´„ÇÄ„Çπ„ÇØ„É™„Éó„Éà -->
    <!-- „Åì„Çå„Çâ„ÅØ main.js „ÇÑ eventHandlers.js „Åã„ÇâÂëº„Å≥Âá∫„Åï„Çå„Çã -->
    <!-- ‰æã: <script src="legacyWebSockets.js"></script> -->
    <!-- ‰æã: <script src="legacyDataFetchers.js"></script> -->
    <!-- ÂÆüÈöõ„ÅÆ„Éï„Ç°„Ç§„É´Âêç„ÅØ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Å´Âêà„Çè„Åõ„Å¶„Åè„Å†„Åï„ÅÑ -->

</body>
</html>